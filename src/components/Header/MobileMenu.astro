---
import TranslatedText from '../TranslatedText.astro';
---

<div class="mobile-menu-container">
  <button class="mobile-menu-button md:hidden p-2 text-white hover:bg-gray-800 rounded-lg transition-colors">
    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
    </svg>
  </button>

  <div class="mobile-menu fixed inset-0 z-50 hidden" style="background-color: #000000;">
    <div class="flex flex-col h-full w-full" style="background-color: #000000;">
      <div class="flex justify-end p-4 border-b border-gray-800" style="background-color: #000000;">
        <button class="close-mobile-menu p-2 text-white hover:bg-gray-800 rounded-lg transition-colors">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path>
          </svg>
        </button>
      </div>
      
      <nav class="flex flex-col gap-6 px-8 py-6 flex-1" style="background-color: #000000;">
        <a href="/product" class="text-white text-2xl font-semibold hover:text-purple-400 transition-colors">
          <TranslatedText keyPath="header.product" />
        </a>
        <a href="/about-team" class="text-white text-2xl font-semibold hover:text-purple-400 transition-colors">
          <TranslatedText keyPath="header.team" />
        </a>
        <a href="/help-center" class="text-white text-2xl font-semibold hover:text-purple-400 transition-colors">
          <TranslatedText keyPath="header.faq" />
        </a>
        
        <div class="border-t border-gray-800 pt-6 mt-4">
          <p class="text-gray-400 text-sm mb-4" data-i18n="header.language">Language</p>
          <div class="flex flex-col gap-3">
            <button class="mobile-lang-option flex items-center gap-3 p-3 bg-gray-900 border border-gray-800 rounded-lg hover:bg-gray-800 hover:border-purple-500 transition-colors" data-lang="en">
              <span class="text-2xl">ðŸ‡¬ðŸ‡§</span>
              <span class="text-white">English</span>
            </button>
            <button class="mobile-lang-option flex items-center gap-3 p-3 bg-gray-900 border border-gray-800 rounded-lg hover:bg-gray-800 hover:border-purple-500 transition-colors" data-lang="es">
              <span class="text-2xl">ðŸ‡ªðŸ‡¸</span>
              <span class="text-white">EspaÃ±ol</span>
            </button>
          </div>
        </div>
      </nav>
    </div>
  </div>
</div>

<script>
  function initMobileMenu() {
    const menuButton = document.querySelector('.mobile-menu-button');
    const closeButton = document.querySelector('.close-mobile-menu');
    const mobileMenu = document.querySelector('.mobile-menu');
    const langOptions = document.querySelectorAll('.mobile-lang-option');

    menuButton?.addEventListener('click', () => {
      mobileMenu?.classList.remove('hidden');
    });

    closeButton?.addEventListener('click', () => {
      mobileMenu?.classList.add('hidden');
    });

    langOptions.forEach(option => {
      option.addEventListener('click', () => {
        const lang = option.getAttribute('data-lang');
        if (lang) {
          localStorage.setItem('language', lang);
          window.dispatchEvent(new Event('languagechange'));
          mobileMenu?.classList.add('hidden');
        }
      });
    });
  }

  document.addEventListener('DOMContentLoaded', initMobileMenu);
</script>

<style>
  .mobile-menu {
    background-color: #000000 !important;
    backdrop-filter: none !important;
  }
  
  .mobile-menu > div {
    background-color: #000000 !important;
  }
  
  .mobile-menu nav {
    background-color: #000000 !important;
  }
</style>
